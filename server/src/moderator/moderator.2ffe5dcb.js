function t(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},s=e.parcelRequire0b11;null==s&&((s=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var s={id:t,exports:{}};return i[t]=s,e.call(s.exports,s,s.exports),s.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){r[t]=e},e.parcelRequire0b11=s),s.register("27Lyk",(function(e,i){var r,s;t(e.exports,"register",(()=>r),(t=>r=t)),t(e.exports,"resolve",(()=>s),(t=>s=t));var n={};r=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)n[e[i]]=t[e[i]]},s=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s.register("cYnQv",(function(t,e){t.exports=new URL(s("27Lyk").resolve("8juzN"),import.meta.url).toString()})),s.register("iaZd9",(function(t,e){t.exports=new URL(s("27Lyk").resolve("3ECAR"),import.meta.url).toString()})),s.register("73TyW",(function(t,e){t.exports=new URL(s("27Lyk").resolve("jcDXA"),import.meta.url).toString()})),s.register("83c5G",(function(t,e){t.exports=new URL(s("27Lyk").resolve("lcWkq"),import.meta.url).toString()})),s.register("jnpdw",(function(t,e){t.exports=new URL(s("27Lyk").resolve("dIXsb"),import.meta.url).toString()})),s.register("k4aEt",(function(t,e){t.exports=new URL(s("27Lyk").resolve("3Qci8"),import.meta.url).toString()})),s.register("4Yw34",(function(t,e){t.exports=new URL(s("27Lyk").resolve("hnPBt"),import.meta.url).toString()})),s.register("fmV2E",(function(t,e){t.exports=new URL(s("27Lyk").resolve("fcwDH"),import.meta.url).toString()})),s.register("bpGew",(function(t,e){t.exports=new URL(s("27Lyk").resolve("77F2q"),import.meta.url).toString()})),s("27Lyk").register(JSON.parse('{"gYRnX":"moderator.2ffe5dcb.js","8juzN":"right_button.02539b6f.png","3ECAR":"false_button.7ee004e0.png","jcDXA":"basic_tile.60975693.png","lcWkq":"red_tile.31afee64.png","dIXsb":"blue_tile.7f533cf0.png","3Qci8":"grey_tile.e275c97a.png","hnPBt":"switchToBlue.c53b199a.png","fcwDH":"switchToOrange.0be3409c.png","77F2q":"Replay_button.e3343c07.png"}'));const n=Phaser.Utils.Objects.GetValue;var o=function(t,e,i){return void 0===t?{x:e,y:i}:"number"==typeof t?{x:t,y:t}:t},h=function(t,e){"number"==typeof e?(t.x=e,t.y=e):(t.x=n(e,"x",0),t.y=n(e,"y",0))},a=class{constructor(t,e,i,r,s){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,r,s)}setTo(t,e,i,r,s){return this.setPosition(t,e),this.setRadius(s),this.setSize(i,r),this}setPosition(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,i;"number"==typeof t?(e=t,i=t):(e=n(t,"x",0),i=n(t,"y",0));var r=this.cornerRadius;r.tl=o(n(t,"tl",void 0),e,i),r.tr=o(n(t,"tr",void 0),e,i),r.bl=o(n(t,"bl",void 0),e,i),r.br=o(n(t,"br",void 0),e,i)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){h(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){h(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){h(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){h(this.cornerRadius.br,t)}},c=function(t,e,i){var r=i.length;if(r>=2){var s=i[r-2],n=i[r-1];if(t===s&&e===n)return i}return i.push(t,e),i};const u=Phaser.Math.DegToRad;var l=function(t,e,i,r,s,n,o,h,a){o&&n>s?n-=360:!o&&n<s&&(n+=360);var l=u(n-s)/h;s=u(s);for(var f=0;f<=h;f++){var p=s+l*f,d=t+i*Math.cos(p),g=e+r*Math.sin(p);c(d,g,a)}return a},f=Phaser.Renderer.WebGL.Utils,p=function(t,e,i,r,s,n){for(var o=f.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),h=i.pathData,a=i.pathIndexes,c=0;c<a.length;c+=3){var u=2*a[c],l=2*a[c+1],p=2*a[c+2],d=h[u+0]-s,g=h[u+1]-n,y=h[l+0]-s,m=h[l+1]-n,b=h[p+0]-s,w=h[p+1]-n,v=e.getX(d,g),R=e.getY(d,g),E=e.getX(y,m),B=e.getY(y,m),T=e.getX(b,w),A=e.getY(b,w);t.batchTri(i,v,R,E,B,T,A,0,0,1,1,o,o,o,2)}},d=Phaser.Renderer.WebGL.Utils,g=function(t,e,i,r,s){var n=t.strokeTint,o=d.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);n.TL=o,n.TR=o,n.BL=o,n.BR=o;var h=e.pathData,a=h.length-1,c=e.lineWidth,u=c/2,l=h[0]-r,f=h[1]-s;e.closePath||(a-=2);for(var p=2;p<a;p+=2){var g=h[p]-r,y=h[p+1]-s;t.batchLine(l,f,g,y,u,u,c,p-2,!!e.closePath&&p===a-1),l=g,f=y}};const y=Phaser.GameObjects.GetCalcMatrix;var m=function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),n=y(e,i,r),o=s.calcMatrix.copyFrom(n.calc),h=e._displayOriginX,a=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&p(s,o,e,c,h,a),e.isStroked&&g(s,e,c,h,a),t.pipelines.postBatch(e)},b=function(t,e,i,r){var s=i||e.fillColor,n=r||e.fillAlpha,o=(16711680&s)>>>16,h=(65280&s)>>>8,a=255&s;t.fillStyle="rgba("+o+","+h+","+a+","+n+")"},w=function(t,e,i,r){var s=i||e.strokeColor,n=r||e.strokeAlpha,o=(16711680&s)>>>16,h=(65280&s)>>>8,a=255&s;t.strokeStyle="rgba("+o+","+h+","+a+","+n+")",t.lineWidth=e.lineWidth};const v=Phaser.Renderer.Canvas.SetTransform;var R={renderWebGL:m,renderCanvas:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var s=t.currentContext;if(v(t,s,e,i,r)){var n=e._displayOriginX,o=e._displayOriginY,h=e.pathData,a=h.length-1,c=h[0]-n,u=h[1]-o;s.beginPath(),s.moveTo(c,u),e.closePath||(a-=2);for(var l=2;l<a;l+=2){var f=h[l]-n,p=h[l+1]-o;s.lineTo(f,p)}s.closePath(),e.isFilled&&(b(s,e),s.fill()),e.isStroked&&(w(s,e),s.stroke()),s.restore()}}};const E=Phaser.GameObjects.Shape,B=Phaser.Utils.Objects.GetValue,T=Phaser.Geom.Polygon.Earcut;class A extends E{constructor(t,e,i,r,s,n,o,h){void 0===e&&(e=0),void 0===i&&(i=0);var c=new a;super(t,"rexRoundRectangleShape",c);var u=B(n,"radius",n);c.setTo(0,0,r,s,u);var l=B(n,"iteration",void 0);this.setIteration(l),this.setPosition(e,i),void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var i,r=t.cornerRadius,s=this.iteration+1;if(i=r.br,x(i)){var n=t.width-i.x,o=t.height-i.y;l(n,o,i.x,i.y,0,90,!1,s,e)}else c(t.width,t.height,e);if(i=r.bl,x(i)){n=i.x,o=t.height-i.y;l(n,o,i.x,i.y,90,180,!1,s,e)}else c(0,t.height,e);if(i=r.tl,x(i)){n=i.x,o=i.y;l(n,o,i.x,i.y,180,270,!1,s,e)}else c(0,0,e);if(i=r.tr,x(i)){n=t.width-i.x,o=i.y;l(n,o,i.x,i.y,270,360,!1,s,e)}else c(t.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=T(e),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.updateDisplayOrigin(),this.dirty=!0;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setRadiusTL(t){return void 0===t&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return void 0===t&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return void 0===t&&(t=0),this.radiuBL=t,this}setRadiusBR(t){return void 0===t&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var x=function(t){return 0!==t.x&&0!==t.y};Object.assign(A.prototype,R);var k=A;function _(t,e,i,r,s,n,o){var h=new k(this.scene,t,e,i,r,s,n,o);return this.scene.add.existing(h),h}const S=Phaser.Utils.Objects.GetAdvancedValue,O=Phaser.Utils.Objects.GetValue,L=Phaser.GameObjects.BuildGameObject;function C(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=S(t,"width",void 0),r=S(t,"height",i),s=O(t,"radius",void 0),n=S(t,"fillColor",void 0),o=S(t,"fillAlpha",void 0),h=new k(this.scene,0,0,i,r,s,n,o);return L(this.scene,h,t),h}var I=function(t){return null==t||""===t||0===t.length},P=function(t,e,i,r){if(void 0===r&&(r="."),"object"==typeof t){if(I(e)){if(null==i)return;"object"==typeof i&&(t=i)}else{"string"==typeof e&&(e=e.split(r));var s=e.pop(),n=function(t,e,i){var r=t;if(I(e));else{var s;"string"==typeof e&&(e=e.split("."));for(var n=0,o=e.length;n<o;n++){var h;null!=r[s=e[n]]&&"object"==typeof r[s]||(h=n===o-1?void 0===i?{}:i:{},r[s]=h),r=r[s]}}return r}(t,e);n[s]=i}return t}};class N extends Phaser.Plugins.BasePlugin{constructor(t){super(t),t.registerGameObject("rexRoundRectangle",_,C)}start(){this.game.events.on("destroy",this.destroy,this)}}P(window,"RexPlugins.GameObjects.RoundRectangle",k);var U=N;var j=new Phaser.Events.EventEmitter;const F=Object.create(null);F.open="0",F.close="1",F.ping="2",F.pong="3",F.message="4",F.upgrade="5",F.noop="6";const D=Object.create(null);Object.keys(F).forEach((t=>{D[F[t]]=t}));const M={type:"error",data:"parser error"},q="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),H="function"==typeof ArrayBuffer,$=(t,e)=>{const i=new FileReader;return i.onload=function(){const t=i.result.split(",")[1];e("b"+t)},i.readAsDataURL(t)};var z=({type:t,data:e},i,r)=>{return q&&e instanceof Blob?i?r(e):$(e,r):H&&(e instanceof ArrayBuffer||(s=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer))?i?r(e):$(new Blob([e]),r):r(F[t]+(e||""));var s};const G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<G.length;t++)W[G.charCodeAt(t)]=t;const Y="function"==typeof ArrayBuffer,V=(t,e)=>{if(Y){const i=(t=>{let e,i,r,s,n,o=.75*t.length,h=t.length,a=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);const c=new ArrayBuffer(o),u=new Uint8Array(c);for(e=0;e<h;e+=4)i=W[t.charCodeAt(e)],r=W[t.charCodeAt(e+1)],s=W[t.charCodeAt(e+2)],n=W[t.charCodeAt(e+3)],u[a++]=i<<2|r>>4,u[a++]=(15&r)<<4|s>>2,u[a++]=(3&s)<<6|63&n;return c})(t);return Q(i,e)}return{base64:!0,data:t}},Q=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;var X=(t,e)=>{if("string"!=typeof t)return{type:"message",data:Q(t,e)};const i=t.charAt(0);if("b"===i)return{type:"message",data:V(t.substring(1),e)};return D[i]?t.length>1?{type:D[i],data:t.substring(1)}:{type:D[i]}:M};const K=String.fromCharCode(30);function J(t){if(t)return function(t){for(var e in J.prototype)t[e]=J.prototype[e];return t}(t)}J.prototype.on=J.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},J.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},J.prototype.off=J.prototype.removeListener=J.prototype.removeAllListeners=J.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var s=0;s<r.length;s++)if((i=r[s])===e||i.fn===e){r.splice(s,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},J.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){r=0;for(var s=(i=i.slice(0)).length;r<s;++r)i[r].apply(this,e)}return this},J.prototype.emitReserved=J.prototype.emit,J.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},J.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Z="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function tt(t,...e){return e.reduce(((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e)),{})}const et=setTimeout,it=clearTimeout;function rt(t,e){e.useNativeTimers?(t.setTimeoutFn=et.bind(Z),t.clearTimeoutFn=it.bind(Z)):(t.setTimeoutFn=setTimeout.bind(Z),t.clearTimeoutFn=clearTimeout.bind(Z))}class st extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class nt extends J{constructor(t){super(),this.writable=!1,rt(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new st(t,e,i)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=X(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const ot="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ht={};let at,ct=0,ut=0;function lt(t){let e="";do{e=ot[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function ft(){const t=lt(+new Date);return t!==at?(ct=0,at=t):t+"."+lt(ct++)}for(;ut<64;ut++)ht[ot[ut]]=ut;function pt(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}let dt=!1;try{dt="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const gt=dt;function yt(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||gt))return new XMLHttpRequest}catch(t){}if(!e)try{return new(Z[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function mt(){}const bt=null!=new yt({xdomain:!1}).responseType;class wt extends J{constructor(t,e){super(),rt(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=tt(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new yt(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=wt.requestsCount++,wt.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=mt,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete wt.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(wt.requestsCount=0,wt.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",vt);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Z?"pagehide":"unload",vt,!1)}function vt(){for(let t in wt.requests)wt.requests.hasOwnProperty(t)&&wt.requests[t].abort()}const Rt="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Et=Z.WebSocket||Z.MozWebSocket;var Bt,Tt;Bt=function(t){var e,i,r=It(t),s=r[0],n=r[1],o=new St(function(t,e,i){return 3*(e+i)/4-i}(0,s,n)),h=0,a=n>0?s-4:s;for(i=0;i<a;i+=4)e=_t[t.charCodeAt(i)]<<18|_t[t.charCodeAt(i+1)]<<12|_t[t.charCodeAt(i+2)]<<6|_t[t.charCodeAt(i+3)],o[h++]=e>>16&255,o[h++]=e>>8&255,o[h++]=255&e;2===n&&(e=_t[t.charCodeAt(i)]<<2|_t[t.charCodeAt(i+1)]>>4,o[h++]=255&e);1===n&&(e=_t[t.charCodeAt(i)]<<10|_t[t.charCodeAt(i+1)]<<4|_t[t.charCodeAt(i+2)]>>2,o[h++]=e>>8&255,o[h++]=255&e);return o},Tt=function(t){for(var e,i=t.length,r=i%3,s=[],n=16383,o=0,h=i-r;o<h;o+=n)s.push(Pt(t,o,o+n>h?h:o+n));1===r?(e=t[i-1],s.push(kt[e>>2]+kt[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(kt[e>>10]+kt[e>>4&63]+kt[e<<2&63]+"="));return s.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var At,xt,kt=[],_t=[],St="undefined"!=typeof Uint8Array?Uint8Array:Array,Ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lt=0,Ct=Ot.length;Lt<Ct;++Lt)kt[Lt]=Ot[Lt],_t[Ot.charCodeAt(Lt)]=Lt;function It(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function Pt(t,e,i){for(var r,s,n=[],o=e;o<i;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),n.push(kt[(s=r)>>18&63]+kt[s>>12&63]+kt[s>>6&63]+kt[63&s]);return n.join("")}_t["-".charCodeAt(0)]=62,_t["_".charCodeAt(0)]=63,At=function(t,e,i,r,s){var n,o,h=8*s-r-1,a=(1<<h)-1,c=a>>1,u=-7,l=i?s-1:0,f=i?-1:1,p=t[e+l];for(l+=f,n=p&(1<<-u)-1,p>>=-u,u+=h;u>0;n=256*n+t[e+l],l+=f,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=r;u>0;o=256*o+t[e+l],l+=f,u-=8);if(0===n)n=1-c;else{if(n===a)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),n-=c}return(p?-1:1)*o*Math.pow(2,n-r)},xt=function(t,e,i,r,s,n){var o,h,a,c=8*n-s-1,u=(1<<c)-1,l=u>>1,f=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:n-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),(e+=o+l>=1?f/a:f*Math.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=u?(h=0,o=u):o+l>=1?(h=(e*a-1)*Math.pow(2,s),o+=l):(h=e*Math.pow(2,l-1)*Math.pow(2,s),o=0));s>=8;t[i+p]=255&h,p+=d,h/=256,s-=8);for(o=o<<s|h,c+=s;c>0;t[i+p]=255&o,p+=d,o/=256,c-=8);t[i+p-d]|=128*g};const Nt="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function Ut(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,jt.prototype),e}function jt(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return Mt(t)}return Ft(t,e,i)}function Ft(t,e,i){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!jt.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|zt(t,e);let r=Ut(i);const s=r.write(t,e);s!==i&&(r=r.slice(0,s));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Be(t,Uint8Array)){const e=new Uint8Array(t);return Ht(e.buffer,e.byteOffset,e.byteLength)}return qt(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Be(t,ArrayBuffer)||t&&Be(t.buffer,ArrayBuffer))return Ht(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(Be(t,SharedArrayBuffer)||t&&Be(t.buffer,SharedArrayBuffer)))return Ht(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return jt.from(r,e,i);const s=function(t){if(jt.isBuffer(t)){const e=0|$t(t.length),i=Ut(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||Te(t.length)?Ut(0):qt(t);if("Buffer"===t.type&&Array.isArray(t.data))return qt(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return jt.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function Dt(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Mt(t){return Dt(t),Ut(t<0?0:0|$t(t))}function qt(t){const e=t.length<0?0:0|$t(t.length),i=Ut(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function Ht(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,jt.prototype),r}function $t(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function zt(t,e){if(jt.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Be(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return ve(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Re(t).length;default:if(s)return r?-1:ve(t).length;e=(""+e).toLowerCase(),s=!0}}function Gt(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return se(this,e,i);case"utf8":case"utf-8":return ee(this,e,i);case"ascii":return ie(this,e,i);case"latin1":case"binary":return re(this,e,i);case"base64":return te(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Wt(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function Yt(t,e,i,r,s){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Te(i=+i)&&(i=s?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(s)return-1;i=t.length-1}else if(i<0){if(!s)return-1;i=0}if("string"==typeof e&&(e=jt.from(e,r)),jt.isBuffer(e))return 0===e.length?-1:Vt(t,e,i,r,s);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):Vt(t,[e],i,r,s);throw new TypeError("val must be string, number or Buffer")}function Vt(t,e,i,r,s){let n,o=1,h=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,h/=2,a/=2,i/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(s){let r=-1;for(n=i;n<h;n++)if(c(t,n)===c(e,-1===r?0:n-r)){if(-1===r&&(r=n),n-r+1===a)return r*o}else-1!==r&&(n-=n-r),r=-1}else for(i+a>h&&(i=h-a),n=i;n>=0;n--){let i=!0;for(let r=0;r<a;r++)if(c(t,n+r)!==c(e,r)){i=!1;break}if(i)return n}return-1}function Qt(t,e,i,r){i=Number(i)||0;const s=t.length-i;r?(r=Number(r))>s&&(r=s):r=s;const n=e.length;let o;for(r>n/2&&(r=n/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(Te(r))return o;t[i+o]=r}return o}function Xt(t,e,i,r){return Ee(ve(e,t.length-i),t,i,r)}function Kt(t,e,i,r){return Ee(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function Jt(t,e,i,r){return Ee(Re(e),t,i,r)}function Zt(t,e,i,r){return Ee(function(t,e){let i,r,s;const n=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,s=i%256,n.push(s),n.push(r);return n}(e,t.length-i),t,i,r)}function te(t,e,i){return 0===e&&i===t.length?Tt(t):Tt(t.slice(e,i))}function ee(t,e,i){i=Math.min(t.length,i);const r=[];let s=e;for(;s<i;){const e=t[s];let n=null,o=e>239?4:e>223?3:e>191?2:1;if(s+o<=i){let i,r,h,a;switch(o){case 1:e<128&&(n=e);break;case 2:i=t[s+1],128==(192&i)&&(a=(31&e)<<6|63&i,a>127&&(n=a));break;case 3:i=t[s+1],r=t[s+2],128==(192&i)&&128==(192&r)&&(a=(15&e)<<12|(63&i)<<6|63&r,a>2047&&(a<55296||a>57343)&&(n=a));break;case 4:i=t[s+1],r=t[s+2],h=t[s+3],128==(192&i)&&128==(192&r)&&128==(192&h)&&(a=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&h,a>65535&&a<1114112&&(n=a))}}null===n?(n=65533,o=1):n>65535&&(n-=65536,r.push(n>>>10&1023|55296),n=56320|1023&n),r.push(n),s+=o}return function(t){const e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return i}(r)}jt.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),jt.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(jt.prototype,"parent",{enumerable:!0,get:function(){if(jt.isBuffer(this))return this.buffer}}),Object.defineProperty(jt.prototype,"offset",{enumerable:!0,get:function(){if(jt.isBuffer(this))return this.byteOffset}}),jt.poolSize=8192,jt.from=function(t,e,i){return Ft(t,e,i)},Object.setPrototypeOf(jt.prototype,Uint8Array.prototype),Object.setPrototypeOf(jt,Uint8Array),jt.alloc=function(t,e,i){return function(t,e,i){return Dt(t),t<=0?Ut(t):void 0!==e?"string"==typeof i?Ut(t).fill(e,i):Ut(t).fill(e):Ut(t)}(t,e,i)},jt.allocUnsafe=function(t){return Mt(t)},jt.allocUnsafeSlow=function(t){return Mt(t)},jt.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==jt.prototype},jt.compare=function(t,e){if(Be(t,Uint8Array)&&(t=jt.from(t,t.offset,t.byteLength)),Be(e,Uint8Array)&&(e=jt.from(e,e.offset,e.byteLength)),!jt.isBuffer(t)||!jt.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let s=0,n=Math.min(i,r);s<n;++s)if(t[s]!==e[s]){i=t[s],r=e[s];break}return i<r?-1:r<i?1:0},jt.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},jt.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return jt.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=jt.allocUnsafe(e);let s=0;for(i=0;i<t.length;++i){let e=t[i];if(Be(e,Uint8Array))s+e.length>r.length?(jt.isBuffer(e)||(e=jt.from(e)),e.copy(r,s)):Uint8Array.prototype.set.call(r,e,s);else{if(!jt.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,s)}s+=e.length}return r},jt.byteLength=zt,jt.prototype._isBuffer=!0,jt.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)Wt(this,e,e+1);return this},jt.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)Wt(this,e,e+3),Wt(this,e+1,e+2);return this},jt.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)Wt(this,e,e+7),Wt(this,e+1,e+6),Wt(this,e+2,e+5),Wt(this,e+3,e+4);return this},jt.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?ee(this,0,t):Gt.apply(this,arguments)},jt.prototype.toLocaleString=jt.prototype.toString,jt.prototype.equals=function(t){if(!jt.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===jt.compare(this,t)},jt.prototype.inspect=function(){let t="";return t=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(t+=" ... "),"<Buffer "+t+">"},Nt&&(jt.prototype[Nt]=jt.prototype.inspect),jt.prototype.compare=function(t,e,i,r,s){if(Be(t,Uint8Array)&&(t=jt.from(t,t.offset,t.byteLength)),!jt.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),e<0||i>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&e>=i)return 0;if(r>=s)return-1;if(e>=i)return 1;if(this===t)return 0;let n=(s>>>=0)-(r>>>=0),o=(i>>>=0)-(e>>>=0);const h=Math.min(n,o),a=this.slice(r,s),c=t.slice(e,i);for(let t=0;t<h;++t)if(a[t]!==c[t]){n=a[t],o=c[t];break}return n<o?-1:o<n?1:0},jt.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},jt.prototype.indexOf=function(t,e,i){return Yt(this,t,e,i,!0)},jt.prototype.lastIndexOf=function(t,e,i){return Yt(this,t,e,i,!1)},jt.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let n=!1;for(;;)switch(r){case"hex":return Qt(this,t,e,i);case"utf8":case"utf-8":return Xt(this,t,e,i);case"ascii":case"latin1":case"binary":return Kt(this,t,e,i);case"base64":return Jt(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zt(this,t,e,i);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}},jt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(t,e,i){let r="";i=Math.min(t.length,i);for(let s=e;s<i;++s)r+=String.fromCharCode(127&t[s]);return r}function re(t,e,i){let r="";i=Math.min(t.length,i);for(let s=e;s<i;++s)r+=String.fromCharCode(t[s]);return r}function se(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let s="";for(let r=e;r<i;++r)s+=Ae[t[r]];return s}function ne(t,e,i){const r=t.slice(e,i);let s="";for(let t=0;t<r.length-1;t+=2)s+=String.fromCharCode(r[t]+256*r[t+1]);return s}function oe(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function he(t,e,i,r,s,n){if(!jt.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<n)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function ae(t,e,i,r,s){ye(e,r,s,t,i,7);let n=Number(e&BigInt(4294967295));t[i++]=n,n>>=8,t[i++]=n,n>>=8,t[i++]=n,n>>=8,t[i++]=n;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function ce(t,e,i,r,s){ye(e,r,s,t,i,7);let n=Number(e&BigInt(4294967295));t[i+7]=n,n>>=8,t[i+6]=n,n>>=8,t[i+5]=n,n>>=8,t[i+4]=n;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function ue(t,e,i,r,s,n){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function le(t,e,i,r,s){return e=+e,i>>>=0,s||ue(t,0,i,4),xt(t,e,i,r,23,4),i+4}function fe(t,e,i,r,s){return e=+e,i>>>=0,s||ue(t,0,i,8),xt(t,e,i,r,52,8),i+8}jt.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,jt.prototype),r},jt.prototype.readUintLE=jt.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||oe(t,e,this.length);let r=this[t],s=1,n=0;for(;++n<e&&(s*=256);)r+=this[t+n]*s;return r},jt.prototype.readUintBE=jt.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||oe(t,e,this.length);let r=this[t+--e],s=1;for(;e>0&&(s*=256);)r+=this[t+--e]*s;return r},jt.prototype.readUint8=jt.prototype.readUInt8=function(t,e){return t>>>=0,e||oe(t,1,this.length),this[t]},jt.prototype.readUint16LE=jt.prototype.readUInt16LE=function(t,e){return t>>>=0,e||oe(t,2,this.length),this[t]|this[t+1]<<8},jt.prototype.readUint16BE=jt.prototype.readUInt16BE=function(t,e){return t>>>=0,e||oe(t,2,this.length),this[t]<<8|this[t+1]},jt.prototype.readUint32LE=jt.prototype.readUInt32LE=function(t,e){return t>>>=0,e||oe(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},jt.prototype.readUint32BE=jt.prototype.readUInt32BE=function(t,e){return t>>>=0,e||oe(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},jt.prototype.readBigUInt64LE=xe((function(t){me(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||be(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,s=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(s)<<BigInt(32))})),jt.prototype.readBigUInt64BE=xe((function(t){me(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||be(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],s=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(s)})),jt.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||oe(t,e,this.length);let r=this[t],s=1,n=0;for(;++n<e&&(s*=256);)r+=this[t+n]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*e)),r},jt.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||oe(t,e,this.length);let r=e,s=1,n=this[t+--r];for(;r>0&&(s*=256);)n+=this[t+--r]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*e)),n},jt.prototype.readInt8=function(t,e){return t>>>=0,e||oe(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},jt.prototype.readInt16LE=function(t,e){t>>>=0,e||oe(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},jt.prototype.readInt16BE=function(t,e){t>>>=0,e||oe(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},jt.prototype.readInt32LE=function(t,e){return t>>>=0,e||oe(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},jt.prototype.readInt32BE=function(t,e){return t>>>=0,e||oe(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},jt.prototype.readBigInt64LE=xe((function(t){me(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||be(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),jt.prototype.readBigInt64BE=xe((function(t){me(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||be(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),jt.prototype.readFloatLE=function(t,e){return t>>>=0,e||oe(t,4,this.length),At(this,t,!0,23,4)},jt.prototype.readFloatBE=function(t,e){return t>>>=0,e||oe(t,4,this.length),At(this,t,!1,23,4)},jt.prototype.readDoubleLE=function(t,e){return t>>>=0,e||oe(t,8,this.length),At(this,t,!0,52,8)},jt.prototype.readDoubleBE=function(t,e){return t>>>=0,e||oe(t,8,this.length),At(this,t,!1,52,8)},jt.prototype.writeUintLE=jt.prototype.writeUIntLE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){he(this,t,e,i,Math.pow(2,8*i)-1,0)}let s=1,n=0;for(this[e]=255&t;++n<i&&(s*=256);)this[e+n]=t/s&255;return e+i},jt.prototype.writeUintBE=jt.prototype.writeUIntBE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){he(this,t,e,i,Math.pow(2,8*i)-1,0)}let s=i-1,n=1;for(this[e+s]=255&t;--s>=0&&(n*=256);)this[e+s]=t/n&255;return e+i},jt.prototype.writeUint8=jt.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,1,255,0),this[e]=255&t,e+1},jt.prototype.writeUint16LE=jt.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},jt.prototype.writeUint16BE=jt.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},jt.prototype.writeUint32LE=jt.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},jt.prototype.writeUint32BE=jt.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},jt.prototype.writeBigUInt64LE=xe((function(t,e=0){return ae(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),jt.prototype.writeBigUInt64BE=xe((function(t,e=0){return ce(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),jt.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);he(this,t,e,i,r-1,-r)}let s=0,n=1,o=0;for(this[e]=255&t;++s<i&&(n*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/n>>0)-o&255;return e+i},jt.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);he(this,t,e,i,r-1,-r)}let s=i-1,n=1,o=0;for(this[e+s]=255&t;--s>=0&&(n*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/n>>0)-o&255;return e+i},jt.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},jt.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},jt.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},jt.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},jt.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||he(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},jt.prototype.writeBigInt64LE=xe((function(t,e=0){return ae(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),jt.prototype.writeBigInt64BE=xe((function(t,e=0){return ce(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),jt.prototype.writeFloatLE=function(t,e,i){return le(this,t,e,!0,i)},jt.prototype.writeFloatBE=function(t,e,i){return le(this,t,e,!1,i)},jt.prototype.writeDoubleLE=function(t,e,i){return fe(this,t,e,!0,i)},jt.prototype.writeDoubleBE=function(t,e,i){return fe(this,t,e,!1,i)},jt.prototype.copy=function(t,e,i,r){if(!jt.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const s=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),s},jt.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!jt.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{const n=jt.isBuffer(t)?t:jt.from(t,r),o=n.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<i-e;++s)this[s+e]=n[s%o]}return this};const pe={};function de(t,e,i){pe[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function ge(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function ye(t,e,i,r,s,n){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let s;throw s=n>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(n+1)}${r}`:`>= -(2${r} ** ${8*(n+1)-1}${r}) and < 2 ** ${8*(n+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new pe.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){me(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||be(e,t.length-(i+1))}(r,s,n)}function me(t,e){if("number"!=typeof t)throw new pe.ERR_INVALID_ARG_TYPE(e,"number",t)}function be(t,e,i){if(Math.floor(t)!==t)throw me(t,i),new pe.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new pe.ERR_BUFFER_OUT_OF_BOUNDS;throw new pe.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}de("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),de("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),de("ERR_OUT_OF_RANGE",(function(t,e,i){let r=`The value of "${t}" is out of range.`,s=i;return Number.isInteger(i)&&Math.abs(i)>2**32?s=ge(String(i)):"bigint"==typeof i&&(s=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(s=ge(s)),s+="n"),r+=` It must be ${e}. Received ${s}`,r}),RangeError);const we=/[^+/0-9A-Za-z-_]/g;function ve(t,e){let i;e=e||1/0;const r=t.length;let s=null;const n=[];for(let o=0;o<r;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&n.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&n.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function Re(t){return Bt(function(t){if((t=(t=t.split("=")[0]).trim().replace(we,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Ee(t,e,i,r){let s;for(s=0;s<r&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}function Be(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Te(t){return t!=t}const Ae=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let s=0;s<16;++s)e[r+s]=t[i]+t[s]}return e}();function xe(t){return"undefined"==typeof BigInt?ke:t}function ke(){throw new Error("BigInt not supported")}const _e="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const Se={websocket:class extends nt{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=_e?{}:tt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=_e?new Et(t,e,i):e?new Et(t,e):new Et(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],r=e===t.length-1;z(i,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}r&&Rt((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let i="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=ft()),this.supportsBinary||(t.b64=1);const r=pt(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}check(){return!!Et}},polling:class extends nt{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let i=location.port;i||(i=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=bt&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const i=t.split(K),r=[];for(let t=0;t<i.length;t++){const s=X(i[t],e);if(r.push(s),"error"===s.type)break}return r})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const i=t.length,r=new Array(i);let s=0;t.forEach(((t,n)=>{z(t,!1,(t=>{r[n]=t,++s===i&&e(r.join(K))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let i="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ft()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port);const r=pt(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new wt(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},Oe=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Le=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ce(t){const e=t,i=t.indexOf("["),r=t.indexOf("]");-1!=i&&-1!=r&&(t=t.substring(0,i)+t.substring(i,r).replace(/:/g,";")+t.substring(r,t.length));let s=Oe.exec(t||""),n={},o=14;for(;o--;)n[Le[o]]=s[o]||"";return-1!=i&&-1!=r&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(t,e){const i=/\/{2,9}/g,r=e.replace(i,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||r.splice(0,1);"/"==e.substr(e.length-1,1)&&r.splice(r.length-1,1);return r}(0,n.path),n.queryKey=function(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(i[e]=r)})),i}(0,n.query),n}class Ie extends J{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=Ce(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Ce(e.host).host),rt(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},i=t.split("&");for(let t=0,r=i.length;t<r;t++){let r=i[t].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Se[t](i)}open(){let t;if(this.opts.rememberUpgrade&&Ie.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),i=!1;Ie.priorWebsocketSuccess=!1;const r=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!i)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Ie.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{i||"closed"!==this.readyState&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function s(){i||(i=!0,c(),e.close(),e=null)}const n=t=>{const i=new Error("probe error: "+t);i.transport=e.name,s(),this.emitReserved("upgradeError",i)};function o(){n("transport closed")}function h(){n("socket closed")}function a(t){e&&t.name!==e.name&&s()}const c=()=>{e.removeListener("open",r),e.removeListener("error",n),e.removeListener("close",o),this.off("close",h),this.off("upgrading",a)};e.once("open",r),e.once("error",n),e.once("close",o),this.once("close",h),this.once("upgrading",a),e.open()}onOpen(){if(this.readyState="open",Ie.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(t+="string"==typeof(e=r)?function(t){let e=0,i=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(r++,i+=4);return i}(e):Math.ceil(1.33*(e.byteLength||e.size))),i>0&&t>this.maxPayload)return this.writeBuffer.slice(0,i);t+=2}var e;return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof i&&(r=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const s={type:t,data:e,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?i():t()})):this.upgrading?i():t()),this}onError(t){Ie.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const r=t.length;for(;i<r;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}Ie.protocol=4;Ie.protocol;var Pe={};t(Pe,"protocol",(()=>Ge)),t(Pe,"PacketType",(()=>We)),t(Pe,"Encoder",(()=>Ye)),t(Pe,"Decoder",(()=>Ve));const Ne="function"==typeof ArrayBuffer,Ue=Object.prototype.toString,je="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ue.call(Blob),Fe="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ue.call(File);function De(t){return Ne&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||je&&t instanceof Blob||Fe&&t instanceof File}function Me(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++)if(Me(t[e]))return!0;return!1}if(De(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return Me(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&Me(t[e]))return!0;return!1}function qe(t){const e=[],i=t.data,r=t;return r.data=He(i,e),r.attachments=e.length,{packet:r,buffers:e}}function He(t,e){if(!t)return t;if(De(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}if(Array.isArray(t)){const i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=He(t[r],e);return i}if("object"==typeof t&&!(t instanceof Date)){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=He(t[r],e));return i}return t}function $e(t,e){return t.data=ze(t.data,e),t.attachments=void 0,t}function ze(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=ze(t[i],e);else if("object"==typeof t)for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=ze(t[i],e));return t}const Ge=5;var We;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(We||(We={}));class Ye{constructor(t){this.replacer=t}encode(t){return t.type!==We.EVENT&&t.type!==We.ACK||!Me(t)?[this.encodeAsString(t)]:(t.type=t.type===We.EVENT?We.BINARY_EVENT:We.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==We.BINARY_EVENT&&t.type!==We.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=qe(t),i=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(i),r}}class Ve extends J{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===We.BINARY_EVENT||e.type===We.BINARY_ACK?(this.reconstructor=new Qe(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!De(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===We[i.type])throw new Error("unknown packet type "+i.type);if(i.type===We.BINARY_EVENT||i.type===We.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const s=t.substring(r,e);if(s!=Number(s)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}i.nsp=t.substring(r,e)}else i.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(!Ve.isPayloadValid(i.type,r))throw new Error("invalid payload");i.data=r}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case We.CONNECT:return"object"==typeof e;case We.DISCONNECT:return void 0===e;case We.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case We.EVENT:case We.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case We.ACK:case We.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Qe{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=$e(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Xe(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const Ke=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Je extends J{constructor(t,e,i){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Xe(t,"open",this.onopen.bind(this)),Xe(t,"packet",this.onpacket.bind(this)),Xe(t,"error",this.onerror.bind(this)),Xe(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Ke.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const i={type:We.EVENT,data:e,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,r=e.pop();this._registerAckCallback(t,r),i.id=t}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){const i=this.flags.timeout;if(void 0===i)return void(this.acks[t]=e);const r=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),i);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(r),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:We.CONNECT,data:t})})):this.packet({type:We.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case We.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case We.EVENT:case We.BINARY_EVENT:this.onevent(t);break;case We.ACK:case We.BINARY_ACK:this.onack(t);break;case We.DISCONNECT:this.ondisconnect();break;case We.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,e.packet({type:We.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:We.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}function Ze(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ze.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},Ze.prototype.reset=function(){this.attempts=0},Ze.prototype.setMin=function(t){this.ms=t},Ze.prototype.setMax=function(t){this.max=t},Ze.prototype.setJitter=function(t){this.jitter=t};class ti extends J{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,rt(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=e.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new Ze({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||Pe;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Ie(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=Xe(e,"open",(function(){i.onopen(),t&&t()})),s=Xe(e,"error",(e=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",e),t?t(e):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&r();const i=this.setTimeoutFn((()=>{r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}return this.subs.push(r),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Xe(t,"ping",this.onping.bind(this)),Xe(t,"data",this.ondata.bind(this)),Xe(t,"error",this.onerror.bind(this)),Xe(t,"close",this.onclose.bind(this)),Xe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new Je(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ei={};function ii(t,e){"object"==typeof t&&(e=t,t=void 0);const i=function(t,e="",i){let r=t;i=i||"undefined"!=typeof location&&location,null==t&&(t=i.protocol+"//"+i.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==i?i.protocol+"//"+t:"https://"+t),r=Ce(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(i&&i.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),r=i.source,s=i.id,n=i.path,o=ei[s]&&n in ei[s].nsps;let h;return e.forceNew||e["force new connection"]||!1===e.multiplex||o?h=new ti(r,e):(ei[s]||(ei[s]=new ti(r,e)),h=ei[s]),i.query&&!e.query&&(e.query=i.queryKey),h.socket(i.path,e)}Object.assign(ii,{Manager:ti,Socket:Je,io:ii,connect:ii});const ri=ii("http://localhost:8080");ri.on("connect",(()=>{console.log(`You connected with id ${ri.id}`)})),ri.on("GiveQuestion",((t,e)=>{console.log(t),console.log(e)})),window.addEventListener("unload",(t=>{t.preventDefault()}));class si{constructor(t,e,i,r,s){this.ctx=t,this.x=e,this.y=i,this.duration=r,this.elapsedTime=1,this.releaseButtons=s}timerRender(){this.timer=this.ctx.add.circle(this.x,this.y,70,16711680),this.timerText=this.ctx.add.text(this.x,this.y,"Timer",{fontFamily:"Arial",fontSize:"24px",color:"#000000",align:"center"}).setOrigin(.5),this.timer.setInteractive();const t={delay:1e3,callback:this.updateTimer.bind(this),repeat:this.duration/1e3};this.timer.once("pointerdown",(()=>{j.emit("timerStart"),this.releaseButtons(),this.timerText.setText(7),this.elapsedTime=1,this.clockTimer=this.ctx.time.addEvent(t),this.ctx.tweens.add({targets:this.timerAngle,duration:this.duration,max:0}),this.ctx.tweens.add({targets:[this.timerAngle,this.timerText,this.timer],alpha:0,duration:500,delay:this.duration})}))}updateTimer(){const t=this.duration/1e3+1;this.elapsedTime++,this.elapsedTime<t?this.timerText.setText(t-this.elapsedTime):this.timerText.setText("END")}createArc(){this.graphics=this.ctx.add.graphics(),this.timerAngle={max:360}}updateArc(){this.graphics.clear(),this.graphics.lineStyle(15,16711935),this.graphics.beginPath(),this.graphics.arc(this.x,this.y,50,Phaser.Math.DegToRad(0),Phaser.Math.DegToRad(this.timerAngle.max),!1),this.graphics.strokePath()}hide(){this.graphics.visible=!1,this.timerText.visible=!1,this.timer.visible=!1}}class ni extends Phaser.Scene{constructor(){super("NormalQuestion"),j.on("newQuestion",this.loadDataFromBoard.bind(this)),j.on("playerSwitch",this.switchPlayerAndRerender.bind(this)),this.timer=new si(this,400,120,7e3,this.releaseRFButtons.bind(this)),this.switchHandler}create(){this.renderQuestionAndAnswer(),this.timer.timerRender(),this.timer.createArc(),this.renderRightFalseButtons(),this.renderSwitchButton()}update(){this.timer.updateArc()}loadDataFromBoard(t,e,i,r,s,n){this.scene.restart(),this.switchHandler=r,this.data.set("BoardData",{number:t,question:e,actualPlayer:i,isTF:n}),this.answerHandler=s}renderQuestionAndAnswer(){const t={fontFamily:"Arial",fontSize:"24px",color:"#000000",align:"center"},e=this.data.get("BoardData").question.question;this.questionText=this.add.text(400,300,e,{...t,wordWrap:{width:400}});const i=this.data.get("BoardData").actualPlayer;this.questionText.setDepth(2),this.questionText.setOrigin(.5),this.questionLabel=this.add.rexRoundRectangle(400,300,400,200,20,"B"==i?1684990:16753920),this.questionLabel.setStrokeStyle(10,16777215,1);const r=this.data.get("BoardData").question.answer;this.answerText=this.add.text(400,460,r,{...t,wordWrap:{width:200}}),this.answerText.setDepth(2),this.answerText.setOrigin(.5),this.answerLabel=this.add.rexRoundRectangle(400,460,200,100,20,12051223)}renderRightFalseButtons(){this.right=this.add.sprite(200,500,"right_button"),this.false=this.add.sprite(600,500,"false_button"),this.right.scale=this.false.scale=2/3,this.right.setTint(6710886),this.false.setTint(6710886)}releaseRFButtons(){this.right.clearTint(),this.false.clearTint();const t=this.data.get("BoardData").isTF;this.right.setInteractive(),this.false.setInteractive(),this.right.on("pointerdown",(()=>{this.answerHandler(!0,t),this.scene.switch("GameScene")})),this.false.on("pointerdown",(()=>{this.answerHandler(!1,t),this.scene.switch("GameScene")}))}renderSwitchButton(){function t(t){const e=this.add.sprite(400,120,t);return e.scale=2/3,e.setDepth(-1),e}const e=this.data.get("BoardData").actualPlayer;"B"==e&&(this.switch=t.call(this,"switchToOrange")),"O"==e&&(this.switch=t.call(this,"switchToBlue")),this.switch.setInteractive(),this.switch.on("pointerdown",this.switchHandler)}switchPlayerAndRerender(t){this.data.get("BoardData").actualPlayer=t,this.questionLabel.fillColor="B"==t?1684990:16753920,this.switch.visible=!1,this.timer.hide()}}class oi{constructor(t){this.ctx,this.x,this.y,this.spriteTile,this.number=t,this.pyramidCoords={x:void 0,y:void 0},this.numberHolder,this.tileState=void 0,this.border={left:!1,right:!1,bottom:!1}}init(t,e){this.ctx=t,this.boardHandler=e}render(t,e,i){this.x=t,this.y=e,this.spriteTile=this.ctx.add.sprite(t,e,"base_tile");const r=this.spriteTile.width,s=this.spriteTile.height;this.spriteTile.setInteractive(new Phaser.Geom.Polygon([[r/2,0],[r,s/4],[r,3*s/4],[r/2,s],[0,3*s/4],[0,s/4]]),Phaser.Geom.Polygon.Contains),this.spriteTile.on("pointerdown",(()=>{this.clickHandler()})),this.spriteTile.setScale(.5),this._renderNumber()}_renderNumber(){this.numberHolder=this.ctx.add.text(this.x,this.y,`${this.number}`,{fontFamily:"Arial",fontSize:"24px",color:"#000000"}).setOrigin(.5)}clickHandler(){this.boardHandler(this)}setColor(){"B"==this.tileState?(this.numberHolder.destroy(),this.spriteTile.setTexture("blue_tile")):"O"==this.tileState?(this.numberHolder.destroy(),this.spriteTile.setTexture("red_tile")):"G"==this.tileState&&this.spriteTile.setTexture("grey_tile")}setState(t=this.tileState.status){this.tileState=t,"B"!=this.tileState&&"O"!=this.tileState||this.spriteTile.removeListener("pointerdown"),this.setColor()}setBorder(t){this.border[t]=!0}}class hi{constructor(t="Trivia"){this.api="https://opentdb.com/api.php?amount=28&type=multiple&encode=base64",this.mode=t,this.questions=[],this.TFQuestions=[],this.pin,this.backup,j.on("killSession",(()=>{localStorage.removeItem("pin"),location.reload()}))}async getPin(){if(localStorage.getItem("pin")){const t=localStorage.getItem("pin");await this.checkSession(t)?(this.pin=t,j.emit("oldSessionFound")):(localStorage.removeItem("pin"),await this.getNewPin())}else await this.getNewPin();j.emit("gotPin",this.pin),console.log(this.pin),ri.emit("join-room-moderator",this.pin),console.log(this.pin)}async getNewPin(){try{const t=window.location.search.substring(1),e=new URLSearchParams(t).get("pin");localStorage.removeItem("pin"),localStorage.setItem("pin",e),this.pin=e;const i=await fetch(`http://localhost:8080/moderator-check-active?pin=${e}`),r=await i.json();console.log(r.session),r.session||window.location.replace("http://localhost:8080"),await this.getQuestions(e)}catch(t){console.error("Unable to get Pin",t)}}async checkSession(t){try{const e=await fetch(`http://localhost:8080/get-session/?pin=${t}`),i=await e.json();return!(!i.pin||!i.pin.numOfSaves)&&(this.backup=i.pin,!0)}catch(t){return!1}}async getQuestions(t){if(t){const e=await fetch(`http://localhost:8080/get-questions/?pin=${t}`);console.log(e);const i=await e.json();console.log(i),this.questions=i.questions.normalQuestions,this.TFQuestions=i.questions.TFQuestions}}async getTFQuestions(){for(let t=0;t<28;t++){const e={question:`Je toto vzorová true false otázka s číslem ${t+1}?`,answer:"ANO"};this.TFQuestions.push(e)}}}class ai{constructor(t=7){this.chosenTile,this.boardModel=function(t){let e=1,i=1;const r=[];for(let s=0;s<t;s++){const t=[];for(let r=0;r<e;r++)t.push(new oi(i)),i++;e+=1,r.push(t)}return r}(t),this.ctx,this.player="B",this.network=new hi,j.on("restoreSession",(t=>{ci(this.boardModel,((t,e,i)=>{t.tileState=this.network.backup.boardModel[e][i],t.setState()})),this.player=this.network.backup.nextPlayer,t()})),j.on("timerStart",(()=>{ri.emit("timerStart",this.network.pin)}))}init(t){this.ctx=t,ci(this.boardModel,(t=>{t.init(this.ctx,this.boardHandler.bind(this))})),this.network.getPin(),console.log("PIN GAINED"),ci(this.boardModel,this.setBorder)}render(t,e){const i={width:140,height:160};let r=t,s=e;this.boardModel.forEach(((t,e)=>{!function(t,e,i,r,s){let n=t;i.forEach(((t,i)=>{t.render(n,e,1),t.pyramidCoords={x:i,y:s},n+=r.width/2}))}(r,s,t,i,e),r-=i.width/4,s+=3*i.height/8}))}boardHandler(t){this.chosenTile=t,console.log(this.chosenTile);const e=this.chosenTile.tileState?this.network.TFQuestions[t.number-1]:this.network.questions[t.number-1];console.log(e);ri.emit("QuestionPick",this.network.pin,this.chosenTile.number,this.chosenTile.pyramidCoords,e.hint?e.hint:this.chosenTile.number.toString()),e&&(this.ctx.scene.switch("NormalQuestion"),j.emit("newQuestion",t.number,e,this.player,this.switchPlayer.bind(this),this.questionAnsweredRight.bind(this),!!this.chosenTile.tileState))}switchPlayer(){console.log("SWITCHED"),"B"==this.player?this.player="O":"O"==this.player&&(this.player="B"),ri.emit("playerSwitch",this.network.pin,this.player),j.emit("playerSwitch",this.player)}questionAnsweredRight(t,e=!1){let i;t?i=this.player:e?(this.switchPlayer(),i=this.player):i="G",ri.emit("tileResolved",this.network.pin,i,this.chosenTile.pyramidCoords,this.player,this.network.pin),this.chosenTile.setState(i),this.checkWin(),this.switchPlayer()}checkWin(){const t={right:!1,left:!1,bottom:!1},e=[],i=[[-1,-1],[0,-1],[-1,0],[1,0],[0,1],[1,1]];function r(){e.forEach((e=>{e.border.left&&(t.left=!0),e.border.right&&(t.right=!0),e.border.bottom&&(t.bottom=!0)})),t.left&&t.right&&t.bottom&&(console.log(this.player," WINS!"),this.ctx.renderWinner(this.player))}(function t(s){i.forEach((i=>{const n=s.pyramidCoords.x+i[0],o=s.pyramidCoords.y+i[1];if(!this.boardModel[o]||!this.boardModel[o][n])return;const h=this.boardModel[o][n];h.tileState!=this.player||e.includes(h)||(e.push(h),r.call(this),t.call(this,h))}))}).call(this,this.chosenTile),console.log(e)}setBorder(t,e,i,r){0==i&&t.setBorder("left"),i==e&&t.setBorder("right"),e==r-1&&t.setBorder("bottom")}}function ci(t,e,i=7){let r=1;for(let s=0;s<i;s++){for(let n=0;n<r;n++)e(t[s][n],s,n,i);r+=1}}class ui extends Phaser.Scene{constructor(){super("GameScene"),this.board=new ai,j.on("oldSessionFound",(()=>{this.load.on("complete",this.askRestoreSession.bind(this))})),j.on("gotPin",(t=>{this.hideOverlay(),this.renderOverlay(`Pin is ${t} \nPlease connect the player`)})),ri.on("player-joined",(()=>{this.hideOverlay()})),this.elements=[]}preload(){this.load.image("right_button",s("cYnQv")),this.load.image("false_button",s("iaZd9")),this.load.image("base_tile",s("73TyW")),this.load.image("red_tile",s("83c5G")),this.load.image("blue_tile",s("jnpdw")),this.load.image("grey_tile",s("k4aEt")),this.load.image("switchToBlue",s("4Yw34")),this.load.image("switchToOrange",s("fmV2E")),this.load.image("button",s("bpGew")),this.board.init(this)}create(){this.board.render(400,100)}renderWinner(t){ri.emit("win",this.board.network.pin,t);const e=("O"==t?"Orange":"Blue")+" player wins";this.renderOverlay(e);const i=this.add.image(400,370,"button");i.setScale(.4),i.setDepth(8),i.setInteractive(),i.on("pointerdown",(()=>{location.reload()}))}renderOverlay(t){const e=this.add.container(400,300),i=this.add.rectangle(0,0,1600,1200,65280,.1);i.setInteractive();const r=this.add.text(0,0,t,{color:16777215,fontFamily:"Arial",fontSize:"40px",fontStyle:"bold",wordWrap:{width:700},align:"center"}),s=this.add.rectangle(r.x,r.y,r.width,r.height,4613998);e.add(i),e.add(s),e.add(r),r.setOrigin(.5),s.setDepth(3),e.setDepth(4),this.elements.push(e)}askRestoreSession(){this.renderOverlay("There was found unfinished game, would you like to restore it?");const t=this.add.sprite(300,400,"right_button"),e=this.add.sprite(500,400,"false_button");t.setScale(.5),t.setDepth(8),e.setDepth(8),t.setInteractive(),e.setInteractive(),e.setScale(.5),this.elements.push(t,e),t.on("pointerdown",(()=>{j.emit("restoreSession",this.hideOverlay.bind(this))})),e.on("pointerdown",(()=>{j.emit("killSession")}))}hideOverlay(){this.elements.forEach((t=>{t.destroy()}))}}const li={type:Phaser.AUTO,width:800,height:600,physics:{default:"arcade",arcade:{}},plugins:{global:[{key:"rexRoundRectanglePlugin",plugin:U,start:!0}]},scale:{autoCenter:Phaser.Scale.CENTER_BOTH,mode:Phaser.Scale.FIT},resolution:window.devicePixelRatio,backgroundColor:"#23a4c4",scene:[ui,ni]};new Phaser.Game(li);
//# sourceMappingURL=moderator.2ffe5dcb.js.map
